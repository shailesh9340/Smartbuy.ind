<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SMARTBUY.IND</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* --- CSS RESET & COLORS --- */
body{margin:0;font-family:Arial, sans-serif;background-color:#0d0dde; color:#333;}

#welcomeScreen{
  position:fixed; inset:0;
  background:#2209c2;
  z-index:5000;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  animation:fadeOut 1s ease forwards;
  animation-delay:2.5s;
}
#welcomeScreen img{
  width:120px;height:120px;
  border-radius:50%;
  border:3px solid #fff;
  animation:zoomIn 1.2s ease;
}
#welcomeScreen h1{
  color:#fff;
  margin-top:15px;
  font-size:22px;
  letter-spacing:1px;
  animation:slideUp 1s ease;
}
@keyframes zoomIn{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes slideUp{from{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes fadeOut{to{opacity:0;visibility:hidden}}

/* HEADER */
header{
    position:fixed; top:0; left:0; width:100%; height:65px; z-index:1000;
    background:#2209c2; padding:0 15px;
    display:flex; align-items:center; justify-content:space-between;
    box-shadow:0 2px 5px rgba(0,0,0,.2);
    box-sizing: border-box;
}

/* LOGO - ADMIN TRIGGER */
header img{
    height:45px; width:45px; 
    border-radius: 50%; 
    object-fit: cover;
    border: 2px solid #fff;
    cursor:pointer;
}

/* BRAND NAME */
.brand-name{
    font-size:22px; font-weight:900; 
    color:#fff; letter-spacing:1px;
    text-transform: uppercase;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

#userTop{color:#fff; font-size:14px; font-weight: bold;}

/* MAIN CONTAINER - GAP FIXED HERE */
.main{
    padding-top: 65px; /* üî• Pehle 75px tha, ab 65px (Gap removed) */
    padding-bottom: 100px; 
    width: 100%;
    overflow-x: hidden;
}

/* SEARCH BAR - MOVED UP */
.search-wrapper {
    position: sticky; top: 10px; z-index: 900;
    background: #0d0dde; 
    padding: 2px 10px 10px 10px; /* üî• Top padding 10px se 2px kar di */
}

.search-input {
    width: 100%; padding: 12px 15px;
    border: none; background: #fff;
    border-radius: 30px; outline: none;
    font-size: 15px; box-sizing: border-box;
    color: #333;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

/* CATEGORIES */
.cat-scroll {
    display:flex; overflow-x:auto; background:#fff; padding:15px 10px;
    border-radius: 10px 10px 0 0;
    margin: 0 10px;
}
.cat-item {
    min-width:85px; text-align:center; margin-right:10px; 
    cursor:pointer; display: flex; flex-direction: column; align-items: center;
}
.cat-item img {
    width:60px; height:60px; border-radius:50%; object-fit:cover; border: 2px solid #eee;
}
.cat-item p {font-size:12px; margin:5px 0 0; color: #333;}

/* SUBCATEGORIES */
.sub-scroll {
    display:flex; overflow-x:auto; padding:10px; background:#fff;
    white-space: nowrap; margin: 0 10px 10px 10px;
    border-radius: 0 0 10px 10px;
}
.sub-btn {
    padding:8px 15px; background:#eee; border-radius:20px;
    margin-right:10px; font-size:13px; color: #333;
}

/* PRODUCT GRID */
#grid_panel {
    display: grid;
    grid-template-columns: 1fr 1fr; 
    gap: 10px;
    padding: 10px;
}

.prod-card {
    background: #fff; border-radius: 10px; overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    display: flex; flex-direction: column;
}

.prod-img-box {
    width: 100%; height: 180px; background: #ddd;
    position: relative;
}
.prod-img-box img {
    width: 100%; height: 100%; object-fit: cover;
}

.info-box { padding: 8px; }
.info-box h4 {
    font-size: 13px; margin: 0 0 5px; color: #000;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.price { color: green; font-weight: bold; font-size: 14px; margin-left: 5px; }
.cut { text-decoration: line-through red; -webkit-text-decoration: line-through red; color: #888; font-size: 11px; margin-left: 5px; }
.off-tag { color: red; font-size: 11px; margin-left: 5px; }

.btn-row {
    display: flex; margin-top: auto; padding: 8px; gap: 5px;
}
.btn-row button {
    flex: 1; border: none; padding: 8px; border-radius: 4px; font-weight: bold; cursor: pointer;
}
.btn-wish { background: #eee; color: #e1306c; font-size: 16px; }
.btn-buy { background: #ff5722; color: #fff; }

/* BOTTOM NAV */
.bottom-nav {
    position: fixed; bottom: 0; left: 0; width: 100%;
    background: #fff; border-top: 1px solid #ddd;
    display: flex; justify-content: space-around; padding: 10px 0;
    z-index: 1000;
}
.nav-item { text-align: center; font-size: 12px; cursor: pointer; }
.nav-icon { font-size: 20px; display: block; margin-bottom: 3px; }

/* ADMIN MODAL */
.modal {
    position: fixed; inset: 0; background: rgba(0,0,0,0.9);
    z-index: 2000; display: none; align-items: center; justify-content: center;
}
.modal-box {
    background: #fff; padding: 20px; width: 85%; border-radius: 10px;
    text-align: center;
}
.stat-box {
    background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 5px;
    display: flex; justify-content: space-between;
}

/* ===== ADMIN DASHBOARD ===== */
#dash{margin-bottom:15px}
.dash-cards{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.card{
  color:#fff;padding:15px;border-radius:8px;
}
.card b{font-size:18px;display:block}
.red{background:#ff3b3b}
.yellow{background:#ffc107;color:#000}
.green{background:#2ecc71}
.blue{background:#3498db}

.dash-box{
  background:#f9f9f9;
  margin-top:10px;
  padding:10px;
  border-radius:8px;
}

canvas{width:100%;height:120px}

.pie{
  width:120px;height:120px;border-radius:50%;
  background:conic-gradient(
    #3498db 0% 45%,
    #2ecc71 45% 60%,
    #ffc107 60% 100%
  );
  margin:auto;
}

</style>
</head>

<body>

<header>
    <img src="https://i.ibb.co/8DbgQ53J/file-000000002c787209a2c8df5f2b17d7b5.png" onclick="handleAdminLogin()">
    <div class="brand-name">SMARTBUY.IND</div>
    <div id="userTop" onclick="handleAccount()">Login</div>
</header>

<div class="main">

    <div class="search-wrapper">
        <input type="text" class="search-input" id="searchInp" placeholder="Search products..." onkeyup="runSearch()">
    </div>

    <div class="cat-scroll" id="cat_panel"></div>
    <div class="sub-scroll" id="sub_panel"></div>
    
    <div id="grid_panel"></div>
     
    <div style="background:#fff; margin:15px 10px; padding:20px; border-radius:10px; text-align:center; box-shadow:0 2px 5px rgba(0,0,0,.1);">
    <h3 style="margin:0 0 10px 0; color:#e1306c;">üì∏ Follow on Instagram</h3>
    <a href="https://instagram.com/smart_buy.ind" target="_blank" style="display:flex; align-items:center; justify-content:center; gap:10px; background:#e1306c; color:#fff; padding:12px; border-radius:25px; text-decoration:none; font-weight:bold; font-size:14px;">
        <img src="https://cdn.pixabay.com/photo/2021/06/15/12/14/instagram-6338392_1280.png" style="height:20px; filter: brightness(0) invert(1);">
        @smart_buy.ind
    </a>
  </div>
    <div style="background:#fff; margin:15px 10px; padding:20px; border-radius:10px; text-align:center;">
        <h3 style="margin:0;color:#2209c2">üíñ Support SmartBuy</h3>
        <p>Help us grow with your support üôè</p>
        <button style="background:orange; color:white; border:none; padding:10px 20px; border-radius:20px; font-weight:bold; margin-top:10px;" onclick="location.href='upi://pay?pa=9343988416-2@ybl&pn=SmartBuy'">Donate Now</button>
    </div>

</div>

<div class="bottom-nav">
    <div class="nav-item" onclick="resetHome()"><span class="nav-icon">üè†</span>Home</div>
    <div class="nav-item" onclick="showWishlistPage()"><span class="nav-icon">‚ù§Ô∏è</span>Wishlist</div>
    <div class="nav-item" onclick="handleAccount()"><span class="nav-icon">üë§</span>Account</div>
</div>

<div class="modal" id="adminModal">
    <div class="modal-box">
        <h2 style="color:#2209c2">Admin Panel üìä</h2>
        <!-- ADMIN DASHBOARD -->
<div id="dash">

  <div class="dash-cards">
    <div class="card red">
      <b id="d_visit">0</b>
      <span>Visits</span>
    </div>
    <div class="card yellow">
      <b>46%</b>
      <span>Bounce</span>
    </div>
    <div class="card green">
      <b id="d_page">0</b>
      <span>Pageviews</span>
    </div>
    <div class="card blue">
      <b>+12%</b>
      <span>Growth</span>
    </div>
  </div>

  <div class="dash-box">
    <h4>User Statistics</h4>
    <canvas id="lineChart"></canvas>
  </div>

  <div class="dash-box">
    <h4>Traffic Types</h4>
    <div class="pie"></div>
  </div>

</div>

        <div class="stat-box"><span>Total Products:</span> <b id="adm_prod">0</b></div>
        <div class="stat-box"><span>Total Categories:</span> <b id="adm_cat">0</b></div>
        <div class="stat-box"><span>Buy Button Clicks:</span> <b id="adm_click">0</b></div>
        <div class="stat-box"><span>Registered Users:</span> <b id="adm_user">0</b></div>
        <button onclick="document.getElementById('adminModal').style.display='none'" style="margin-top:10px;padding:10px;width:100%">Close</button>
    </div>
</div>

<script>
// --- DATABASE ---
const DB_CATS = [
    {name:"For You", img:"https://cdn-icons-png.flaticon.com/512/833/833314.png"},
    {name:"Fashion", img:"https://cdn-icons-png.flaticon.com/512/3050/3050253.png", sub:["Men","Women"]},
    {name:"Bags", img:"https://cdn-icons-png.flaticon.com/512/2838/2838838.png"},
    {name:"Electronics", img:"https://cdn-icons-png.flaticon.com/512/3659/3659898.png"}
];

const DB_ITEMS = [
    { id:1, name:"Premium Backpack Encrypted", cat:"Bags", sub:"", price:322, cut:999, link:"https://bitli.in/JZizUxb", img:"https://i.ibb.co/tkxs7w0/IMG-20260128-215957.jpg" },
    { id:2, name:"MEN Full sleeve sweatshirt", cat:"Fashion", sub:"Men", price:299, cut:1499, link:"https://fktr.in/trid8uL", img:"https://i.ibb.co/zH2qJBLK/Screenshot-2026-01-28-23-27-52-532-com-flipkart-android-edit.jpg" },
    { id:3, name:"Women Floral Kurti", cat:"Fashion", sub:"Women", price:253, cut:1999, link:"https://bitli.in/mYd26le", img:"https://i.ibb.co/jvnM1DvY/Screenshot-2026-01-28-20-42-57-901-com-flipkart-shopsy-edit.jpg" },
    { id:4, name:"Men Regular Fit Trousers", cat:"Fashion", sub:"Men", price:262, cut:999, link:"https://bitli.in/w8hSXkv", img:"https://i.ibb.co/xKgxySx2/Screenshot-2026-01-28-20-51-16-478-com-flipkart-shopsy-edit.jpg" }
];

// --- LOCAL STORAGE INIT ---
if(!localStorage.getItem("site_stats")) localStorage.setItem("site_stats", JSON.stringify({clicks:0}));
if(!localStorage.getItem("wishlist")) localStorage.setItem("wishlist", JSON.stringify([]));

// --- STATE VARIABLES ---
let activeCat = "For You";
let activeSub = "";
let searchTerm = "";
let isWishlistMode = false;

// --- CORE FUNCTIONS ---

// 1. Render Categories
function drawCategories(){
    let html = "";
    DB_CATS.forEach(c => {
        html += `
        <div class="cat-item" onclick="changeCat('${c.name}')">
            <img src="${c.img}" style="border-color:${activeCat===c.name?'blue':'#eee'}">
            <p style="font-weight:${activeCat===c.name?'bold':'normal'}">${c.name}</p>
        </div>`;
    });
    document.getElementById("cat_panel").innerHTML = html;
}

// ===== ADMIN DASHBOARD LOGIC =====
function loadDashboard(){
  let stats = JSON.parse(localStorage.getItem("site_stats")) || {clicks:0};

  document.getElementById("d_visit").innerText = stats.clicks * 12 + 120;
  document.getElementById("d_page").innerText = stats.clicks * 30 + 300;

  let c = document.getElementById("lineChart");
  if(!c) return;
  let ctx = c.getContext("2d");
  ctx.clearRect(0,0,300,150);

  ctx.beginPath();
  ctx.moveTo(0,100);
  ctx.lineTo(50,80);
  ctx.lineTo(100,90);
  ctx.lineTo(150,60);
  ctx.lineTo(200,40);
  ctx.lineTo(250,70);
  ctx.strokeStyle="#e91e63";
  ctx.lineWidth=3;
  ctx.stroke();
}

/* Admin open hook */
let _openAdmin = openAdminPanel;
openAdminPanel = function(){
  _openAdmin();
  setTimeout(loadDashboard,200);
};

// 2. Render Subcategories
function drawSubcats(){
    let html = "";
    let found = DB_CATS.find(c => c.name === activeCat);
    if(found && found.sub){
        found.sub.forEach(s => {
            let color = (activeSub === s) ? "#2209c2" : "#eee";
            let text = (activeSub === s) ? "#fff" : "#333";
            html += `<div class="sub-btn" style="background:${color};color:${text}" onclick="changeSub('${s}')">${s}</div>`;
        });
    }
    document.getElementById("sub_panel").innerHTML = html;
}

// 3. Render Products (Main Logic)
function drawProducts(){
    let container = document.getElementById("grid_panel");
    container.innerHTML = "";
    
    // Get Wishlist IDs
    let wishIds = JSON.parse(localStorage.getItem("wishlist"));

    let displayList = [];

    if(isWishlistMode){
        // Only show items in wishlist
        displayList = DB_ITEMS.filter(item => wishIds.includes(item.id));
        if(displayList.length === 0) container.innerHTML = "<div style='width:200%;text-align:center;padding:20px;color:#fff'>Your wishlist is empty üíî</div>";
    } else {
        // Normal Filter Logic
        displayList = DB_ITEMS.filter(item => {
            let catMatch = (activeCat === "For You" || item.cat === activeCat);
            let subMatch = (activeSub === "" || item.sub === activeSub);
            let searchMatch = item.name.toLowerCase().includes(searchTerm);
            return catMatch && subMatch && searchMatch;
        });
        if(displayList.length === 0) container.innerHTML = "<div style='width:200%;text-align:center;padding:20px;color:#fff'>No products found.</div>";
    }

    displayList.forEach(item => {
        let discount = Math.round((1 - item.price/item.cut)*100);
        let isWished = wishIds.includes(item.id);
        
        container.innerHTML += `
        <div class="prod-card">
            <div class="prod-img-box">
                <img src="${item.img}" onclick="window.open('${item.link}')">
            </div>
            <div class="info-box">
                <h4>${item.name}</h4>
                <div>
                    <span class="price">‚Çπ${item.price}</span>
                    <span class="cut">‚Çπ${item.cut}</span>
                    <span class="off">(${discount}% OFF)</span>
                </div>
                <div class="btn-row">
                    <button class="btn-wish" onclick="toggleWish(${item.id})">
                        ${isWished ? '‚ù§Ô∏è' : 'ü§ç'}
                    </button>
                    <button class="btn-buy" onclick="trackBuy('${item.link}')">BUY</button>
                </div>
            </div>
        </div>`;
    });
}

// --- REAL FEATURES LOGIC ---

// ACCOUNT SYSTEM
function handleAccount(){
    let user = JSON.parse(localStorage.getItem("user"));
    if(user){
        if(confirm(`Logged in as: ${user.name}\nDo you want to logout?`)){
            localStorage.removeItem("user");
            document.getElementById("userTop").innerText = "Login";
            alert("Logged out successfully.");
        }
    } else {
        let name = prompt("Enter your Name for Login/Signup:");
        if(!name) return;
        let pass = prompt("Create/Enter Password:");
        if(name && pass){
            localStorage.setItem("user", JSON.stringify({name: name, pass: pass}));
            document.getElementById("userTop").innerText = name;
            alert("Welcome, " + name + "!");
        }
    }
}

// CHECK LOGIN ON LOAD
let savedUser = JSON.parse(localStorage.getItem("user"));
if(savedUser) document.getElementById("userTop").innerText = savedUser.name;

// WISHLIST SYSTEM
function toggleWish(id){
    let w = JSON.parse(localStorage.getItem("wishlist"));
    if(w.includes(id)){
        w = w.filter(x => x !== id); // Remove
    } else {
        w.push(id); // Add
    }
    localStorage.setItem("wishlist", JSON.stringify(w));
    drawProducts(); // Re-render to update hearts
}

function showWishlistPage(){
    isWishlistMode = true;
    document.getElementById("cat_panel").style.display = "none";
    document.getElementById("sub_panel").style.display = "none";
    drawProducts();
}

// ADMIN SYSTEM
function handleAdminLogin(){
    let u = prompt("Admin Mobile Number:");
    let p = prompt("Admin Password:");
    
    if(u === "9343988416" && p === "1234"){
        openAdminPanel();
    } else {
        alert("Wrong Credentials!");
    }
}

function openAdminPanel(){
    let stats = JSON.parse(localStorage.getItem("site_stats"));
    let userCount = localStorage.getItem("user") ? 1 : 0; // Simple count for demo
    
    document.getElementById("adm_prod").innerText = DB_ITEMS.length;
    document.getElementById("adm_cat").innerText = DB_CATS.length;
    document.getElementById("adm_click").innerText = stats.clicks;
    document.getElementById("adm_user").innerText = userCount + " (Active)";
    
    document.getElementById("adminModal").style.display = "flex";
}

// ANALYTICS TRACKER
function trackBuy(link){
    let s = JSON.parse(localStorage.getItem("site_stats"));
    s.clicks++;
    localStorage.setItem("site_stats", JSON.stringify(s));
    window.open(link, '_blank');
}

// NAVIGATION
function changeCat(name){
    isWishlistMode = false;
    document.getElementById("cat_panel").style.display = "flex";
    document.getElementById("sub_panel").style.display = "flex";
    activeCat = name; activeSub = "";
    drawCategories(); drawSubcats(); drawProducts();
}
function changeSub(name){
    activeSub = name;
    drawSubcats(); drawProducts();
}
function runSearch(){
    isWishlistMode = false;
    searchTerm = document.getElementById("searchInp").value.toLowerCase();
    drawProducts();
}
function resetHome(){
    isWishlistMode = false;
    document.getElementById("cat_panel").style.display = "flex";
    document.getElementById("sub_panel").style.display = "flex";
    activeCat = "For You"; activeSub = ""; searchTerm = "";
    document.getElementById("searchInp").value = "";
    drawCategories(); drawSubcats(); drawProducts();
}

// INIT
drawCategories(); drawSubcats(); drawProducts();
</script>

</body>

<!-- WELCOME SCREEN -->
<div id="welcomeScreen">
  <img src="https://i.ibb.co/8DbgQ53J/file-000000002c787209a2c8df5f2b17d7b5.png">
  <h1>Welcome to SMARTBUY.IND</h1>
</div>
</html>

